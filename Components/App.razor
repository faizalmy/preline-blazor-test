<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />
    <link rel="stylesheet" href="@Assets["preline-blazor-test.styles.css"]" />
    <link rel="stylesheet" href="css/tailwind.css" />
    <ImportMap />
    <link rel="icon" type="image/png" href="favicon.png" />
    <HeadOutlet />
</head>

<body>
    <Routes />
    <PrelineNavigationHandler />
    <script src="_framework/blazor.web.js"></script>
    <script src="js/preline.js"></script>
    <script>
        // Initialize Preline components
        function initializePreline() {
            if (window.HSStaticMethods) {
                window.HSStaticMethods.autoInit();
            }
        }

        // Initialize on DOM ready and watch for changes
        document.addEventListener('DOMContentLoaded', function() {
            initializePreline();

            // Watch for new Preline components globally
            new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1 && node.querySelector && (
                                node.querySelector('[data-hs-dropdown]') ||
                                node.querySelector('.hs-dropdown') ||
                                node.querySelector('[data-hs-modal]') ||
                                node.querySelector('.hs-modal') ||
                                node.querySelector('[data-hs-accordion]') ||
                                node.querySelector('.hs-accordion')
                            )) {
                                setTimeout(initializePreline, 50);
                            }
                        });
                    }
                });
            }).observe(document.body, { childList: true, subtree: true });
        });

        // Make function globally available for Blazor
        window.initializePreline = initializePreline;
    </script>
</body>

</html>
